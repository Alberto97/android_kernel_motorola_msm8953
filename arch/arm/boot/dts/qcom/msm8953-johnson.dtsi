/* Copyright (c) 2016, Motorola Mobility Inc. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "msm8953-moto-common.dtsi"
#include "dsi-panel-mot-smd-549-1080p-alb-cmd.dtsi"
#include "dsi-panel-mot-mod-fwvga-video.dtsi"
#include "msm8953-johnson-pinctrl.dtsi"

 / {
	model = "johnson";
	compatible = "qcom,msm8953-johnson", "qcom,msm8953-moto",
			"qcom,msm8953";
	aliases {
		spi7 = &spi_7;
	};
};

&soc {
	alsa_to_h2w {
		status = "disabled";
	};

	gpio_keys {
		compatible = "gpio-keys";
		input-name = "gpio-keys";
		pinctrl-names = "tlmm_gpio_key_active","tlmm_gpio_key_suspend";
		pinctrl-0 = <&gpio_key>;
		pinctrl-1 = <&gpio_key>;

		vol_up {
			label = "volume_up";
			gpios = <&tlmm 85 0x1>;
			linux,input-type = <1>;
			linux,code = <115>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};
	};

	vci_disp_vreg: vci_disp_vreg {
		compatible = "regulator-fixed";
		regulator-name = "vci_disp";
		gpio = <&tlmm 32 0>;
		startup-delay-us = <300>;
		enable-active-high;
		regulator-boot-on;
	};

	vio_disp_vreg: vio_disp_vreg {
		compatible = "regulator-fixed";
		regulator-name = "vio_disp";
		vin-supply = <&pm8953_l6>;
		gpio = <&tlmm 33 0>;
		startup-delay-us = <300>;
		enable-active-high;
		regulator-boot-on;
	};

	i2c_2: i2c@78b6000 { /* BLSP1 QUP2 */
		/delete-node/ stmvl53l0@29;
		/delete-node/ cs35l34@40;
		/delete-node/ pnxxx@28;

		stmvl53l1@29 {
			status = "ok";
			compatible = "st,stmvl53l1";
			reg = <0x29>;
			vdd-vl53l1-supply = <&pm8953_l22>;
			gpios = <&tlmm 66 0>, <&tlmm 129 0>;
			qcom,gpio-reset = <0>;
			qcom,gpio-req-tbl-num = <0 1>;
			qcom,gpio-req-tbl-flags = <0 1>;
			qcom,gpio-req-tbl-label ="TOF_XSHUTDOWN","TOF_INT";
			pinctrl-names = "laser_default", "laser_suspend";
			pinctrl-0 = <&laser_active_irq &laser_active_xsdn>;
			pinctrl-1 = <&laser_suspend_irq &laser_suspend_xsdn>;
			st,sensorthreshold = <60 65>;
			st,xtalkval = <0x1E00 0xFACD 0x0>;
		};

		analogix_anx7805@72 {
			compatible = "analogix,anx7805";
			status = "ok";
			reg = <0x72>;
			interrupt-parent = <&tlmm>;
			interrupts = <9 0>;  /*cbl-det-gpio is interrupt pin*/
			analogix,reset-gpio = <&tlmm 128 0x00>;
			analogix,irq-gpio = <&tlmm 87 0x00>;
			analogix,p-dwn-gpio = <&tlmm 50 0x0>;
			analogix,cbl-det-gpio = <&tlmm 9 0x0>;
			analogix,i2c-pull-up = <1>;
			vdd-1p0-supply = <&pm8953_l2>;
			avdd-3p3-supply = <&pm8953_l6>;
			avdd-1p8-supply = <&pm8953_l5>;
			analogix,vdd10-name = "vdd-1p0";
			analogix,avdd33-name = "avdd-3p3";
			analogix,vdd18-name = "avdd-1p8";

			pinctrl-names = "anx_default", "anx_sleep";
			pinctrl-0 = <&anx_rst_active
					&anx_chip_pd_active &anx_cbl_det_active
					&anx_irq_active>;
			pinctrl-1 = <&anx_rst_suspend
					&anx_chip_pd_suspend &anx_cbl_det_active
					&anx_irq_active>;
		};

		nq:nq@28 {		/* NFC PN553 */
			compatible = "qcom,nq-nci";
			reg = <0x28>;
			interrupt-parent = <&tlmm>;
			interrupts = <17 0>;
			interrupt-names = "nfc_irq";
			qcom,nq-irq = <&tlmm 130 0x00>;
			qcom,nq-ven = <&tlmm 89 0x00>;
			qcom,nq-firm = <&tlmm 87 0x00>;

			pinctrl-names = "default";
			pinctrl-0 = <&nfc_irq_default &nfc_ven_default &nfc_firm_default>;
		};


		cs35l35@40 {
			compatible = "cirrus,cs35l35";
			reg = <0x40>;
			reset-gpios = <&tlmm 94 0>;
			irq-gpios = <&tlmm 63 0>;
			amp-gain-zc;
			interrupt-parent = <&tlmm>;

			VA-supply = <&dummy_vreg>;
			VP-supply = <&dummy_vreg>;
			pinctrl-names = "default";
			pinctrl-0 = <&cs35l35_irq_default &cs35l35_reset_default>;
		};

		fusb302@22 {
			gpios = <&tlmm 46 1>; /* FUSB302_INT_N, in */
			tps,usb-5v-en-gpio = <&pm8953_gpios 2 0>;
		};

		usb3813@2D {
			gpios = <&pmi8950_mpps 3 2>,   /* HUB_RESET_EN */
				    <&tlmm 48 1>;   /* HUB_INT_N */
			pinctrl-0 = <&hub_int_n_default>;
		};
	};

	i2c_4: i2c@78b8000 {
		status = "disabled";
		/delete-node/ motosh@43;
	};

	spi_6: spi@7af6000 { /* BLSP2 QUP2 */
		status = "disabled";
		/delete-node/ marley@0;
	};

	spi_7: spi@7af7000 { /* BLSP2 QUP3 */
		status = "ok";
		compatible = "qcom,spi-qup-v2";
		#address-cells = <1>;
		#size-cells = <0>;
		reg-names = "spi_physical", "spi_bam_physical";
		reg = <0x07af7000 0x600>,
		<0x07ac4000 0x1f000>;
		interrupt-names = "spi_irq", "spi_bam_irq";
		interrupts = <0 301 0>, <0 239 0>;
		spi-max-frequency = <19200000>;

		qcom,infinite-mode = <0>;
		qcom,use-bam;
		qcom,ver-reg-exists;
		qcom,bam-consumer-pipe-index = <8>;
		qcom,bam-producer-pipe-index = <9>;
		qcom,master-id = <84>;
		qcom,use-pinctrl;
		pinctrl-names = "spi_default", "spi_sleep";
		pinctrl-0 = <&spi_7_active &spi7_cs0_active>;
		pinctrl-1 = <&spi_7_sleep &spi7_cs0_sleep>;

		clock-names = "iface_clk", "core_clk";

		clocks = <&clock_gcc clk_gcc_blsp2_ahb_clk>,
			<&clock_gcc clk_gcc_blsp2_qup3_spi_apps_clk>;

		marley: marley@0 {
			compatible = "cirrus,cs47l35";
			spi-max-frequency = <26000000>;
			reg = <0x0>;
			interrupt-parent = <&tlmm>;
			interrupts = <46 0>;
			interrupt-controller;
			#interrupt-cells = <2>;
			wlf,reset = <&tlmm 68 0>;
			wlf,out-mono = <1 0 0 0 0 0>;
			wlf,micbias1 = <2600 1 1 1 1 0>;
			wlf,micbias2 = <1800 1 1 1 1 0>;

			wlf,micd-configs = <0 2 0>;
			wlf,micd-bias-start-time = <8>;
			wlf,gpsw = <1>;
			wlf,use-jd2-irq;
			wlf,report-to-input;
			wlf,micd-rate = <6>;
			wlf,micd-detect-debounce = <300>;
			wlf,inmode = <0 2 0>;
			wlf,micd-ranges = <
				 100 226 /* HEADSETHOOK  */
				 150 582 /* VOICE_ASSIST */
				 295 115 /* VOLUME_UP    */
				1257 114 /* VOLUME_DOWN  */
			>;

			pinctrl-names = "default";
			pinctrl-0 = <&marley_irq_default &marley_reset_default>;

			AVDD-supply = <&pm8953_l6>;
			DBVDD1-supply = <&pm8953_l6>;
			DBVDD2-supply = <&pm8953_l6>;
			CPVDD-supply = <&pm8953_l6>;
			CPVDD1-supply = <&pm8953_l6>;
			CPVDD2-supply = <&pm8953_l6>;
			DCVDD-supply = <&pm8953_l6>;
			SPKVDD-supply = <&dummy_vreg>;

			gpio-controller;
			#gpio-cells = <2>;

			wlf,gpio-defaults = <
				0x00002000 0x0000f000 /* AIF3TXDAT / GPIO1  */
				0x00002000 0x0000f000 /* AIF3BCLK  / GPIO2  */
				0x00000040 0x00000000 /* AIF3RXDAT / GPIO3  */
				0x00002000 0x0000f000 /* AIF3LRCLK / GPIO4  */
				0xffffffff 0xffffffff /* GPIO5 */
				0xffffffff 0xffffffff /* GPIO6 */
				0x00002000 0x0000f000 /* MIF1SDA   / GPIO7  */
				0x00002000 0x0000f000 /* AIF1RXDAT / GPIO8  */
				0x00002000 0x0000f000 /* AIF1BCLK  / GPIO9  */
				0x00002000 0x0000f000 /* AIF1TXDAT / GPIO10 */
				0x00002000 0x0000f000 /* AIF1LRCLK / GPIO11 */
				0x00002000 0x0000f000 /* AIF2TXDAT / GPIO12 */
				0x00002000 0x0000f000 /* AIF2BCLK  / GPIO13 */
				0x00002000 0x0000f000 /* AIF2RXDAT / GPIO14 */
				0x00002000 0x0000f000 /* AIF2LRCLK / GPIO15 */
				0x00002000 0x0000f000 /* MIF1SCLK  / GPIO16 */
			>;

			adsps {
				#address-cells = <1>;
				#size-cells = <0>;
				adsp@0ffe00 {
					reg = <0x0ffe00>;
					firmware {
						ultrasound {
							wlf,wmfw-file = "ultrasound";
							wlf,bin-file = "ultrasound";
							wlf,compr-caps = <1 1 4 1 96000>;
						};
					};
				};
				adsp@17fe00 {
					reg = <0x17fe00>;
					firmware {
						frontend {
							wlf,wmfw-file = "aov-frontend";
							wlf,bin-file = "aov-vrgain";
							wlf,compr-caps = <1 1 4 1 16000>;
						};
					};
				};
				adsp@1ffe00 {
					reg = <0x1ffe00>;
					firmware {
						aov {
							wlf,wmfw-file = "aov-control";
							wlf,bin-file = "aov-model";
							wlf,compr-caps = <1 1 4 1 16000>;
						};
					};
				};
			};
		};
	};

	spi_8: spi@7af8000 { /* BLSP2 QUP3 */
		status = "ok";
		fpc_fpc1020@0{
			status = "ok";
			interrupts = <86 0x0>;
			fpc,gpio_irq = <&tlmm 86 0>;
			fpc,gpio_rst = <&tlmm 8 0>;
			fpc,wakelock_time = <1500>;
		};
	};

	qcom,msm-thermal {
		qcom,config-info = "albus";
	};

	/delete-node/ hdmi_dba;
	hdmi_dba: qcom,msm-hdmi-dba-codec-rx {
		compatible = "qcom,msm-hdmi-dba-codec-rx";
		qcom,dba-bridge-chip = "anx7805";
	};

	sound {
		status = "ok";
		compatible = "qcom,msm8952-audio-slim-codec";
		qcom,model = "msm8952-marley-card";

		/* qcom,marley-mclk-clk-freq = <9600000>; */
		asoc-platform = <&pcm0>, <&pcm1>,
			<&pcm2>, <&voip>,
			<&voice>, <&loopback>,
			<&compress>, <&hostless>,
			<&afe>, <&lsm>,
			<&routing>, <&cpe>,
			<&lpa>, <&marley>;
		asoc-platform-names = "msm-pcm-dsp.0", "msm-pcm-dsp.1",
			"msm-pcm-dsp.2", "msm-voip-dsp",
			"msm-pcm-voice", "msm-pcm-loopback",
			"msm-compress-dsp", "msm-pcm-hostless",
			"msm-pcm-afe", "msm-lsm-client",
			"msm-pcm-routing", "msm-cpe-lsm",
			"msm-pcm-lpa", "marley-codec";

		asoc-cpu = <&dai_pri_auxpcm>,
			<&dai_mi2s5>,
			<&sb_0_rx>, <&sb_0_tx>,
			<&sb_1_rx>, <&sb_1_tx>,
			<&sb_2_rx>, <&sb_2_tx>,
			<&sb_3_rx>, <&sb_3_tx>,
			<&sb_4_rx>, <&sb_4_tx>,
			<&sb_5_tx>, <&afe_pcm_rx>,
			<&afe_pcm_tx>, <&afe_proxy_rx>,
			<&afe_proxy_tx>, <&incall_record_rx>,
			<&incall_record_tx>, <&incall_music_rx>,
			<&incall_music_2_rx>, <&sb_5_rx>,
			<&bt_sco_rx>, <&bt_sco_tx>,
			<&int_fm_rx>, <&int_fm_tx>;
		asoc-cpu-names = "msm-dai-q6-auxpcm.1",
			"msm-dai-q6-mi2s.5",
			"msm-dai-q6-dev.16384", "msm-dai-q6-dev.16385",
			"msm-dai-q6-dev.16386", "msm-dai-q6-dev.16387",
			"msm-dai-q6-dev.16388", "msm-dai-q6-dev.16389",
			"msm-dai-q6-dev.16390", "msm-dai-q6-dev.16391",
			"msm-dai-q6-dev.16392", "msm-dai-q6-dev.16393",
			"msm-dai-q6-dev.16395", "msm-dai-q6-dev.224",
			"msm-dai-q6-dev.225",   "msm-dai-q6-dev.241",
			"msm-dai-q6-dev.240",   "msm-dai-q6-dev.32771",
			"msm-dai-q6-dev.32772", "msm-dai-q6-dev.32773",
			"msm-dai-q6-dev.32770", "msm-dai-q6-dev.16394",
			"msm-dai-q6-dev.12288", "msm-dai-q6-dev.12289",
			"msm-dai-q6-dev.12292", "msm-dai-q6-dev.12293";

		qcom,albus-audio;
		qcom,hdmi-dba-codec-rx;
		asoc-codec = <&stub_codec>, <&hdmi_dba>;
		asoc-codec-names = "msm-stub-codec.1", "msm-hdmi-dba-codec-rx";
		cs47l35,dapm-routing =
			"IN1AL", "MICBIAS2A",
			"IN2R", "MICBIAS2B",
			"IN2L", "MICBIAS2A",
			"IN1BR", "MICBIAS1B",
			"MYDP", "HDMI DBA Playback";
	};

	ospl {
		compatible = "mmi,ospl2xx";
		status = "ok";
		mmi,ospl-tune-index = <4 5 6 7>;
		mmi,ospl-afe-port-id = <16384 16387>;
		mmi,ospl-left-feedback;
		mmi,ospl-volume-control;
	};

	qcom,msm-dai-mi2s {
		dai_mi2s3: qcom,msm-dai-q6-mi2s-quat {
			status = "disabled";
		};
		dai_mi2s5: qcom,msm-dai-q6-mi2s-quin {
			qcom,msm-mi2s-rx-lines = <1>;
		};
	};

	dsi_mod_display_driver: dsi_mod_display_driver {
		compatible = "mmi,dsi_mod_display";

		mod_display,dsi_connect = <1>;
	};

	mot_dba_driver: mot_dba_driver {
		compatible = "mmi,mot_dba";
		status = "ok";

		mot_dba,sel-dsi-val = <0>;
	};
	/delete-node/ eldo2;

	apba_ctrl {
		gpios = <&tlmm 39 0>,      /* APBA_1P1_EN, output-low */
			<&tlmm 140 0>,     /* APBA_BOOTRET, output-low */
			<&tlmm 47 2>,      /* MOD_MPHY_I2S_SEL, output-high */
			<&tlmm 132 0>,     /* APBA_RESET_N, output-low */
			<&tlmm 62 1>,      /* APBA_INT_N, in */
			<&tlmm 141 0>,     /* APBA_WAKE, output-low */
			<&tlmm 41 0>;      /* APBA_SFLASH_EN, output-low */
	};

	hd3ss460 {
		gpios = <&pm8953_gpios 7 0>, /* USB_SS_MOD_EN, output-low */
			<&tlmm 139 0>,       /* USB_SS_SW_SEL, output-low */
			<&pm8953_gpios 8 0>; /* USB_SS_MOD_MPHY_AP_EN, output-low */
		vdd-hd3ss460-supply = <&pm8953_l22>;
		vdd-voltage-level = <2850000 2850000>;
	};

	qusb_phy: qusb@79000 {
		qcom,qusb-phy-init-seq = <0xF8 0x80
					0x03 0x84
					0x81 0x88
					0x07 0x8C
					0x30 0x08
					0x79 0x0C
					0x21 0x10
					0x14 0x9C
					0x9F 0x1C
					0x00 0x18>;
	};

	qcom,tz_gpio {
		compatible = "qcom,tz_gpio";
		tlmm-tz = <96>,
			<97>,
			<98>,
			<99>,
			<111>,
			<126>;
	};
};

&pm8953_l2 {
	regulator-min-microvolt = <1000000>;
	regulator-max-microvolt = <1000000>;
	qcom,init-voltage = <1000000>;
};

&pm8953_gpios {
	gpio@c100 { /* GPIO 2 - USB_5V_EN */
		qcom,mode = <1>;		/* Digital Output */
		qcom,pull = <5>;		/* No pull  */
		qcom,vin-sel = <3>;		/* VIN0 */
		qcom,src-sel = <0>;		/* GPIO */
		qcom,out-strength = <2>;        /* Medium */
		qcom,master-en = <1>;		/* Enable GPIO */
		status = "okay";
	};

	gpio@c400 { /* GPIO 5 - DP-MOD_i2s_SELECT */
		qcom,mode = <1>;
		qcom,vin-sel = <3>;		/* VIN3 */
	};

	gpio@c500 { /* GPIO 6 - USB_SELECT */
		qcom,vin-sel = <3>;		/* VIN3 */
	};

	gpio@c600 { /* GPIO 7 - USB_SS_MOD_EN */
		qcom,vin-sel = <3>;		/* VIN3 */
	};

	gpio@c700 { /* GPIO 8 - USB_SS_MOD_MPHY_AP_EN */
		qcom,vin-sel = <3>;		/* VIN3 */
	};
};


&pmx_mdss {
	mdss_dsi_active {
		mux {
			pins = "gpio61";
		};

		config {
			pins = "gpio61";
		};
	};

	mdss_dsi_suspend {
		mux {
			pins = "gpio61";
		};

		config {
			pins = "gpio61";
		};
	};

	mipi_err_pin_active: mipi_err_pin_active {
		mux {
			pins = "gpio115";
			function = "gpio";
		};

		config {
			pins = "gpio115";
			drive-strength = <2>; /* 2 mA */
			bias-pull-up; /* pull up */
			input-enable;
		};
	};

	mipi_err_pin_suspend: mipi_err_pin_suspend {
		mux {
			pins = "gpio115";
			function = "gpio";
		};

		config {
			pins = "gpio115";
			drive-strength = <2>; /* 2 mA */
			bias-pull-up; /* pull up */
			input-enable;
		};
	};
};

&mdss_mdp {
	qcom,mdss-pref-prim-intf = "dsi";

	mot_dba_panel: qcom,mdss_dsi_mot_dba_panel{
		#include "dsi-panel-mot-mod-fwvga-video-common.dtsi"
	};
};

&mdss_dsi {
	hw-config = "dual_dsi";
};

&mdss_dsi0 {
	pinctrl-names = "mdss_default", "mdss_sleep";
	pinctrl-0 = <&mdss_dsi_active &mdss_te_active &mipi_err_pin_active>;
	pinctrl-1 = <&mdss_dsi_suspend &mdss_te_suspend &mipi_err_pin_suspend>;

	qcom,dsi-pref-prim-pan = <&mot_smd_549_1080p_alb_cmd_v0>;
	vci_disp-supply = <&vci_disp_vreg>;
	vio_disp-supply = <&vio_disp_vreg>;
	elvdd_disp-supply = <&lab_regulator>;
	elvss_disp-supply = <&ibb_regulator>;
	qcom,platform-reset-gpio = <&tlmm 61 0>;
	qcom,platform-te-gpio = <&tlmm 24 0>;
};

&mdss_dsi1 {
	qcom,dsi-pref-prim-pan = <&mot_dba_panel>;
	qcom,pluggable;
	qcom,bridge-index = <0>;
	apba_cdsi-supply = <&pm8953_l23>;
};

&mdss_dsi1_pll {
	/delete-property/ qcom,dsi-pll-ssc-en;
	/delete-property/ qcom,dsi-pll-ssc-mode;
};

&mot_dba_panel {
	qcom,mdss-dsi-panel-name = "mipi_mot_dba_panel";
	qcom,bridge-name = "mot_dba";

	/* These power supplies are for DBA panel */
	qcom,panel-supply-entries {
		#address-cells = <1>;
		#size-cells = <0>;

		qcom,panel-supply-entry@0 {
			reg = <0>;
			qcom,supply-name = "apba_cdsi";
			qcom,supply-min-voltage = <1200000>;
			qcom,supply-max-voltage = <1300000>;
			qcom,supply-enable-load = <300000>;
			qcom,supply-disable-load = <100>;
			qcom,supply-pre-on-sleep = <0>;
			qcom,supply-post-on-sleep = <1>;
			qcom,supply-pre-off-sleep = <0>;
			qcom,supply-post-off-sleep = <1>;
		};
	};
};


/* display boost and inverting boost regulators */
&labibb {
	status = "ok";
	qpnp,qpnp-labibb-mode = "amoled";
	qpnp,swire-control;
};

&ibb_regulator {
	qcom,qpnp-ibb-discharge-resistor = <32>;
};

&pmi8950_mpps {
	mpp@a000 { /* MPP 1 - MOD_BP_OC_FAULT_N */
		qcom,mode = <0>;	/* Input */
		qcom,vin-sel = <2>;	/* 1.8 */
		qcom,src-sel = <0>;	/* GPIO */
		qcom,master-en = <1>;	/* Enable GPIO */
		qcom,invert = <0>;	/* Output low */
		status = "okay";
	};
	mpp@a100 { /* MPP 2 - MOD_F_FLASH */
		qcom,mode = <1>;	/* Digital output */
		qcom,vin-sel = <2>;	/* 1.8 */
		qcom,src-sel = <0>;	/* GPIO */
		qcom,master-en = <1>;	/* Enable GPIO */
		qcom,invert = <0>;	/* Output low */
		status = "okay";
	};
	mpp@a200 { /* MPP 3 - DISP_AVDD_SHUTDOWN */
		qcom,mode = <1>;		/* Digital output */
		qcom,output-type = <0>;		/* CMOS logic */
		qcom,vin-sel = <0>;
		qcom,src-sel = <5>;		/* DTEST2 */
		qcom,master-en = <1>;		/* Enable GPIO */
		qcom,invert = <0>;
		status = "okay";
	};
};

&spmi_bus {
	qcom,pm8950@0 {
		/delete-node/ qcom,leds@a300;
	};

	qcom,pmi8950@2 {
		/delete-node/ qcom,leds@a100;

		qcom,leds@1000 {
			status = "ok";
			reg = <0x1000 0x100>;
			compatible = "qcom,leds-atc";
			linux,name = "charging";
			qcom,ctrl-reg = <0x243>;
		};
	};

	qcom,pmi8950@3 {
		qcom,leds@d800 {
			qcom,disp-type-amoled;
			qcom,switch-freq-khz = <800>;
			qcom,loop-ea-gm = <1>;
			qcom,vref-psm-mv = <550>;
			qcom,ovp-mv = <31000>;
			qcom,enable-amoled-pulse-skipping;
		};
	};
};

&muc {
	gpios = <&tlmm 60 1>,         /* gpio_muc_det_n, input */
		<&pmi8950_gpios 1 0>, /* gpio_muc_bplus_en, output-low */
		<&tlmm 36 1>,         /* gpio_muc_int_n, input */
		<&tlmm 38 2>,         /* gpio_muc_wake_n, output-high */
		<&tlmm 59 1>,         /* gpio_muc_rdy_n, input */
		<&pmi8950_mpps 2 0>,  /* gpio_muc_ff, output-low */
		<&tlmm 0 0>,          /* gpio_muc_spi_mosi, output-low */
		<&tlmm 1 1>,          /* gpio_muc_spi_miso, input */
		<&tlmm 114 2>,        /* gpio_muc_bplus_iset, output-high */
		<0>,                  /* gpio_muc_bplus_discharg, cs */
		<&pmi8950_mpps 1 1>,  /* gpio_muc_bplus_fault_n, input */
		<&tlmm 3 1>;          /* gpio_muc_clk, input */
};

&pm8953_l22 {
	regulator-min-microvolt = <2850000>;
	regulator-max-microvolt = <2850000>;
	qcom,init-voltage = <2850000>;
};

&pmi_haptic{
	status = "disabled";
};

&pmi8950_charger {
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
	/delete-property/ gpios;
	/delete-property/ gpio-names;
	gpios = <&pmi8950_gpios 2 0x0>, /* GPIOF_OUT_INIT_LOW */
		<&pm8953_gpios 5 0x1>; /* GPIOF_IN */
	gpio-names = "eb_vbus_en",
		     "factory_warn";
	qcom,max-usbin-current-ma = <3000>;
	qcom,step-chg-steps = <4200 3000 2000>,
				<4400 2000 1600>;
	qcom,auto-voltage-comp-mv = <150>;
	qcom,enable-parameter-separate;
	qcom,prop-flash-active;
	qcom,enable-charging-limit;
	qcom,upper-limit-capacity = <80>;
	qcom,lower-limit-capacity = <60>;
};

/{
	mot_johnsonbatterydata: qcom,battery-data {
		qcom,batt-id-range-pct = <100>;
		df-serialnum = "SB18C19816";
		#include "batterydata-jp40-swd.dtsi"
	};
};

&pmi8950_fg {
	/delete-property/ qcom,battery-data;
	qcom,irq-volt-empty-mv = <3000>;
	qcom,fg-cutoff-voltage-mv = <3200>;
	qcom,battery-data = <&mot_johnsonbatterydata>;
};
